ðŸ”­ OTLP/HTTP receiver listening on http://localhost:4318
ðŸ“Š metrics: 1 ResourceMetrics

ðŸ”­ Received traces: 1 ResourceSpans
Resource attributes: {
  "lunary.project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
  "service.name": "test-otel-integration",
}
Processing span openai.chat -> 2 events
Processing span openai.chat -> 2 events
Processing span openai.chat -> 2 events
Processing span openai.chat -> 2 events
Processing span openai.chat -> 2 events

ðŸ“¥ Forwarding 10 events to backend
Events: [
  {
    "type": "llm",
    "event": "start",
    "runId": "eb01fc5c-c39d-4e74-bbef-2e08329b2aae",
    "timestamp": "2025-06-24T18:06:43.889Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "system",
      "gen_ai.prompt.0.content": "You are a helpful assistant.",
      "gen_ai.prompt.1.role": "user",
      "gen_ai.prompt.1.content": "Say hello in 3 different languages",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2Kaary2sVsFTRnJPlIBrQZHE223",
      "llm.usage.total_tokens": 32,
      "completion_tokens": 8,
      "prompt_tokens": 24,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "Hello! Bonjour! Hola!",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration"
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 100,
      "temperature": 0.7
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "eb01fc5c-c39d-4e74-bbef-2e08329b2aae",
    "timestamp": "2025-06-24T18:06:44.291Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "system",
      "gen_ai.prompt.0.content": "You are a helpful assistant.",
      "gen_ai.prompt.1.role": "user",
      "gen_ai.prompt.1.content": "Say hello in 3 different languages",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2Kaary2sVsFTRnJPlIBrQZHE223",
      "llm.usage.total_tokens": 32,
      "completion_tokens": 8,
      "prompt_tokens": 24,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "Hello! Bonjour! Hola!",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration",
      "duration_ms": 402.223
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 100,
      "temperature": 0.7
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "a6e67813-dfa5-4db5-b4b9-3bf462addc3f",
    "timestamp": "2025-06-24T18:06:44.292Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": true,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "Count from 1 to 5 slowly",
      "completion_tokens": 9,
      "prompt_tokens": 8,
      "llm.usage.total_tokens": 17,
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2Ka2VhieXyCs8phTmTAEw6gRBdy",
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "1\n2\n3\n4\n5",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration"
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "a6e67813-dfa5-4db5-b4b9-3bf462addc3f",
    "timestamp": "2025-06-24T18:06:44.708Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": true,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "Count from 1 to 5 slowly",
      "completion_tokens": 9,
      "prompt_tokens": 8,
      "llm.usage.total_tokens": 17,
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2Ka2VhieXyCs8phTmTAEw6gRBdy",
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "1\n2\n3\n4\n5",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration",
      "duration_ms": 416.544
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    },
    "level": "error",
    "error": {
      "code": 1
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "e0022920-a192-47c0-ab1a-daa79bd0d645",
    "timestamp": "2025-06-24T18:06:44.708Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 1 + 2?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2KbkEBq9tJh1xuMHoxXfGFhpRd1",
      "llm.usage.total_tokens": 22,
      "completion_tokens": 7,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "1 + 2 = 3",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration"
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "e0022920-a192-47c0-ab1a-daa79bd0d645",
    "timestamp": "2025-06-24T18:06:45.577Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 1 + 2?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2KbkEBq9tJh1xuMHoxXfGFhpRd1",
      "llm.usage.total_tokens": 22,
      "completion_tokens": 7,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "1 + 2 = 3",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration",
      "duration_ms": 869.314
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "d138272b-3e0d-44ec-b32c-a9b0e1b8497c",
    "timestamp": "2025-06-24T18:06:45.578Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 2 + 3?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2Kb4Z4v74ftZIBAFXaRDupcRR1O",
      "llm.usage.total_tokens": 22,
      "completion_tokens": 7,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "2 + 3 = 5",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration"
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "d138272b-3e0d-44ec-b32c-a9b0e1b8497c",
    "timestamp": "2025-06-24T18:06:45.897Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 2 + 3?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2Kb4Z4v74ftZIBAFXaRDupcRR1O",
      "llm.usage.total_tokens": 22,
      "completion_tokens": 7,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "2 + 3 = 5",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration",
      "duration_ms": 318.917
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "fedc785e-fb5e-4711-83f8-1d7ea5a3c6eb",
    "timestamp": "2025-06-24T18:06:45.897Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 3 + 4?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2KcU7YF8PZzm5rPMir6kAgvlO8F",
      "llm.usage.total_tokens": 22,
      "completion_tokens": 7,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "3 + 4 = 7",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration"
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "fedc785e-fb5e-4711-83f8-1d7ea5a3c6eb",
    "timestamp": "2025-06-24T18:06:46.802Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 3 + 4?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2KcU7YF8PZzm5rPMir6kAgvlO8F",
      "llm.usage.total_tokens": 22,
      "completion_tokens": 7,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "3 + 4 = 7",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration",
      "duration_ms": 905.461
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  }
]
Using project key: 07ff18c9-f052-4260-9e89-ea93fe9ba8c5
âŒ Error forwarding OTEL batch to backend: error: Unable to connect. Is the computer able to access the url?
  path: "http://localhost:3333/ingest/otel",
 errno: 0,
  code: "ConnectionRefused"


ðŸ“Š metrics: 1 ResourceMetrics

ðŸ”­ Received traces: 1 ResourceSpans
Resource attributes: {
  "lunary.project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
  "service.name": "test-otel-integration",
}
Processing span openai.chat -> 2 events
Processing span openai.chat -> 2 events
Processing span openai.chat -> 2 events
Processing span openai.chat -> 2 events
Processing span openai.chat -> 2 events

ðŸ“¥ Forwarding 10 events to backend
Events: [
  {
    "type": "llm",
    "event": "start",
    "runId": "f20c116a-5580-4a15-a5b4-9e274f9712a5",
    "timestamp": "2025-06-24T18:08:29.115Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "system",
      "gen_ai.prompt.0.content": "You are a helpful assistant.",
      "gen_ai.prompt.1.role": "user",
      "gen_ai.prompt.1.content": "Say hello in 3 different languages",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2MH5RI7qzbbfpKCIbvCOvhiMzZ4",
      "llm.usage.total_tokens": 32,
      "completion_tokens": 8,
      "prompt_tokens": 24,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "Hello! \nBonjour! \nHola!",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration"
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 100,
      "temperature": 0.7
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "f20c116a-5580-4a15-a5b4-9e274f9712a5",
    "timestamp": "2025-06-24T18:08:29.583Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "system",
      "gen_ai.prompt.0.content": "You are a helpful assistant.",
      "gen_ai.prompt.1.role": "user",
      "gen_ai.prompt.1.content": "Say hello in 3 different languages",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2MH5RI7qzbbfpKCIbvCOvhiMzZ4",
      "llm.usage.total_tokens": 32,
      "completion_tokens": 8,
      "prompt_tokens": 24,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "Hello! \nBonjour! \nHola!",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration",
      "duration_ms": 468.156
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 100,
      "temperature": 0.7
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "283aa96d-45ea-404e-bec1-12090e32d5ee",
    "timestamp": "2025-06-24T18:08:29.583Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": true,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "Count from 1 to 5 slowly",
      "completion_tokens": 9,
      "prompt_tokens": 8,
      "llm.usage.total_tokens": 17,
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2MHYXr6jqbXQHOrsKymH0Z4TTTa",
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "1\n2\n3\n4\n5",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration"
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "283aa96d-45ea-404e-bec1-12090e32d5ee",
    "timestamp": "2025-06-24T18:08:30.020Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": true,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "Count from 1 to 5 slowly",
      "completion_tokens": 9,
      "prompt_tokens": 8,
      "llm.usage.total_tokens": 17,
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2MHYXr6jqbXQHOrsKymH0Z4TTTa",
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "1\n2\n3\n4\n5",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration",
      "duration_ms": 436.467
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    },
    "level": "error",
    "error": {
      "code": 1
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "b04d22ef-a3c9-4056-b325-1a0052992e7f",
    "timestamp": "2025-06-24T18:08:30.020Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 1 + 2?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2MIOvdOj6zOftTUUkQCbHTQscRp",
      "llm.usage.total_tokens": 22,
      "completion_tokens": 7,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "1 + 2 = 3",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration"
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "b04d22ef-a3c9-4056-b325-1a0052992e7f",
    "timestamp": "2025-06-24T18:08:30.438Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 1 + 2?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2MIOvdOj6zOftTUUkQCbHTQscRp",
      "llm.usage.total_tokens": 22,
      "completion_tokens": 7,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "1 + 2 = 3",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration",
      "duration_ms": 418.272
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "0167cadb-33f3-431d-9d4b-298a6ab68d46",
    "timestamp": "2025-06-24T18:08:30.438Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 2 + 3?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2MIDHlwqcfdNZvDI9FGmGoB3ILP",
      "llm.usage.total_tokens": 22,
      "completion_tokens": 7,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "2 + 3 = 5",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration"
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "0167cadb-33f3-431d-9d4b-298a6ab68d46",
    "timestamp": "2025-06-24T18:08:30.919Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 2 + 3?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2MIDHlwqcfdNZvDI9FGmGoB3ILP",
      "llm.usage.total_tokens": 22,
      "completion_tokens": 7,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "2 + 3 = 5",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration",
      "duration_ms": 481.122
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "6b7e180c-7f7b-491e-b72f-cf924e5ea86b",
    "timestamp": "2025-06-24T18:08:30.920Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 3 + 4?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2MJQ3tsScOJOqR9LjrvL24v3DsG",
      "llm.usage.total_tokens": 23,
      "completion_tokens": 8,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "3 + 4 equals 7.",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration"
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "6b7e180c-7f7b-491e-b72f-cf924e5ea86b",
    "timestamp": "2025-06-24T18:08:31.546Z",
    "metadata": {
      "llm.request.type": "chat",
      "system": "OpenAI",
      "llm.headers": "None",
      "llm.is_streaming": false,
      "gen_ai.openai.api_base": "https://api.openai.com/v1/",
      "gen_ai.prompt.0.role": "user",
      "gen_ai.prompt.0.content": "What is 3 + 4?",
      "modelResponse": "gpt-3.5-turbo-0125",
      "responseId": "chatcmpl-Bm2MJQ3tsScOJOqR9LjrvL24v3DsG",
      "llm.usage.total_tokens": 23,
      "completion_tokens": 8,
      "prompt_tokens": 15,
      "cache_read_input_tokens": 0,
      "gen_ai.completion.0.finish_reason": "stop",
      "gen_ai.completion.0.role": "assistant",
      "gen_ai.completion.0.content": "3 + 4 equals 7.",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "service.name": "test-otel-integration",
      "duration_ms": 626.193
    },
    "params": {
      "model": "gpt-3.5-turbo",
      "maxTokens": 20,
      "temperature": 0
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": null,
      "completion": null
    }
  }
]
Using project key: 07ff18c9-f052-4260-9e89-ea93fe9ba8c5
âœ… Successfully forwarded to backend

ðŸ”­ Received traces: 1 ResourceSpans
Resource attributes: {
  "telemetry.sdk.language": "python",
  "telemetry.sdk.name": "opentelemetry",
  "telemetry.sdk.version": "1.34.1",
  "service.name": "pydantic-ai-test",
  "lunary.project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
}
Processing span chat gpt-3.5-turbo -> 2 events
Processing span agent run -> 2 events
Processing span test-1-basic-agent -> 2 events

ðŸ“¥ Forwarding 6 events to backend
Events: [
  {
    "type": "llm",
    "event": "start",
    "runId": "649bd972-43c6-458a-8bdd-7a473de62127",
    "parentRunId": "89307179-6fd1-491c-a3ac-e5459ffcfa25",
    "timestamp": "2025-06-24T18:19:46.789Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a helpful assistant that answers questions concisely.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"What is the capital of France?\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"The capital of France is Paris.\"}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 30,
      "completion": 7
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "649bd972-43c6-458a-8bdd-7a473de62127",
    "parentRunId": "89307179-6fd1-491c-a3ac-e5459ffcfa25",
    "timestamp": "2025-06-24T18:19:47.329Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a helpful assistant that answers questions concisely.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"What is the capital of France?\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"The capital of France is Paris.\"}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 540.835
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 30,
      "completion": 7
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "46509170-8cb2-4ba9-9ac9-6b7551b8de94",
    "parentRunId": "e3cdd2de-3ef5-46a3-80f4-64d9060ca891",
    "timestamp": "2025-06-24T18:19:46.788Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "simple_agent",
      "logfire.msg": "simple_agent run",
      "final_result": "The capital of France is Paris.",
      "all_messages_events": "[{\"content\": \"You are a helpful assistant that answers questions concisely.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"What is the capital of France?\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"content\": \"The capital of France is Paris.\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "tokensUsage": {
      "prompt": 30,
      "completion": 7
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "46509170-8cb2-4ba9-9ac9-6b7551b8de94",
    "parentRunId": "e3cdd2de-3ef5-46a3-80f4-64d9060ca891",
    "timestamp": "2025-06-24T18:19:47.330Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "simple_agent",
      "logfire.msg": "simple_agent run",
      "final_result": "The capital of France is Paris.",
      "all_messages_events": "[{\"content\": \"You are a helpful assistant that answers questions concisely.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"What is the capital of France?\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"content\": \"The capital of France is Paris.\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 541.935
    },
    "tokensUsage": {
      "prompt": 30,
      "completion": 7
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "f663b8f3-595b-4839-ab02-d1cca81e1255",
    "timestamp": "2025-06-24T18:19:46.787Z",
    "metadata": {
      "test.name": "basic_agent",
      "langfuse.user.id": "test-user-1",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "f663b8f3-595b-4839-ab02-d1cca81e1255",
    "timestamp": "2025-06-24T18:19:47.330Z",
    "metadata": {
      "test.name": "basic_agent",
      "langfuse.user.id": "test-user-1",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 542.838
    }
  }
]
Using project key: 07ff18c9-f052-4260-9e89-ea93fe9ba8c5
âœ… Successfully forwarded to backend

ðŸ”­ Received traces: 1 ResourceSpans
Resource attributes: {
  "telemetry.sdk.language": "python",
  "telemetry.sdk.name": "opentelemetry",
  "telemetry.sdk.version": "1.34.1",
  "service.name": "pydantic-ai-test",
  "lunary.project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
}
Processing span chat gpt-3.5-turbo -> 2 events
Processing span running tool -> 2 events
Processing span running tool -> 2 events
Processing span running tool -> 2 events
Processing span running tools -> 2 events
Processing span chat gpt-3.5-turbo -> 2 events
Processing span agent run -> 2 events
Processing span chat gpt-3.5-turbo -> 2 events
Processing span running tool -> 2 events
Processing span running tools -> 2 events
Processing span chat gpt-3.5-turbo -> 2 events
Processing span agent run -> 2 events
Processing span chat gpt-3.5-turbo -> 2 events
Processing span test-2-tools-agent -> 2 events
Processing span test-3-complex-agent -> 2 events

ðŸ“¥ Forwarding 30 events to backend
Events: [
  {
    "type": "llm",
    "event": "start",
    "runId": "0a019e7b-92b7-4efc-aa22-7b2134bc2b9b",
    "parentRunId": "b9312bd0-ce4c-4c7c-884f-69678f1f45aa",
    "timestamp": "2025-06-24T18:19:47.331Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"multiply\", \"description\": \"Multiply two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"add\", \"description\": \"Add two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"power\", \"description\": \"Calculate base raised to the power of exponent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"base\": {\"type\": \"integer\"}, \"exponent\": {\"type\": \"integer\"}}, \"required\": [\"base\", \"exponent\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Calculate (5 * 3) + (2^4)\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_0NxqV6iq47ADSNDPpu5XqAdj\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 5, \\\"b\\\": 3}\"}}, {\"id\": \"call_fLVgY7IGcm048AugGthHyVC6\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 2, \\\"exponent\\\": 4}\"}}, {\"id\": \"call_soq0QJTiJSWNnKARJyBT4a92\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 16}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 121,
      "completion": 67
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "0a019e7b-92b7-4efc-aa22-7b2134bc2b9b",
    "parentRunId": "b9312bd0-ce4c-4c7c-884f-69678f1f45aa",
    "timestamp": "2025-06-24T18:19:54.060Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"multiply\", \"description\": \"Multiply two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"add\", \"description\": \"Add two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"power\", \"description\": \"Calculate base raised to the power of exponent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"base\": {\"type\": \"integer\"}, \"exponent\": {\"type\": \"integer\"}}, \"required\": [\"base\", \"exponent\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Calculate (5 * 3) + (2^4)\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_0NxqV6iq47ADSNDPpu5XqAdj\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 5, \\\"b\\\": 3}\"}}, {\"id\": \"call_fLVgY7IGcm048AugGthHyVC6\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 2, \\\"exponent\\\": 4}\"}}, {\"id\": \"call_soq0QJTiJSWNnKARJyBT4a92\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 16}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 6728.391
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 121,
      "completion": 67
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "268ea48a-3545-4577-9eaf-4169a868dcd5",
    "parentRunId": "8b94c621-3309-4803-ad8a-21d349c090d4",
    "timestamp": "2025-06-24T18:19:54.060Z",
    "metadata": {
      "toolName": "multiply",
      "toolCallId": "call_0NxqV6iq47ADSNDPpu5XqAdj",
      "tool_arguments": "{\"a\": 5, \"b\": 3}",
      "logfire.msg": "running tool: multiply",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "268ea48a-3545-4577-9eaf-4169a868dcd5",
    "parentRunId": "8b94c621-3309-4803-ad8a-21d349c090d4",
    "timestamp": "2025-06-24T18:19:54.064Z",
    "metadata": {
      "toolName": "multiply",
      "toolCallId": "call_0NxqV6iq47ADSNDPpu5XqAdj",
      "tool_arguments": "{\"a\": 5, \"b\": 3}",
      "logfire.msg": "running tool: multiply",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 3.706
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "4fe1a158-5465-4459-8f86-99f640b6446a",
    "parentRunId": "44618776-59be-4351-9e9a-c98196a46eed",
    "timestamp": "2025-06-24T18:19:54.062Z",
    "metadata": {
      "toolName": "power",
      "toolCallId": "call_fLVgY7IGcm048AugGthHyVC6",
      "tool_arguments": "{\"base\": 2, \"exponent\": 4}",
      "logfire.msg": "running tool: power",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "4fe1a158-5465-4459-8f86-99f640b6446a",
    "parentRunId": "44618776-59be-4351-9e9a-c98196a46eed",
    "timestamp": "2025-06-24T18:19:54.064Z",
    "metadata": {
      "toolName": "power",
      "toolCallId": "call_fLVgY7IGcm048AugGthHyVC6",
      "tool_arguments": "{\"base\": 2, \"exponent\": 4}",
      "logfire.msg": "running tool: power",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 1.952
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "1a4ffbb0-4cf5-4c98-9337-5ed44bbb0f73",
    "parentRunId": "4ac37976-6652-48fb-bf3f-277ce34a7afc",
    "timestamp": "2025-06-24T18:19:54.062Z",
    "metadata": {
      "toolName": "add",
      "toolCallId": "call_soq0QJTiJSWNnKARJyBT4a92",
      "tool_arguments": "{\"a\": 15, \"b\": 16}",
      "logfire.msg": "running tool: add",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "1a4ffbb0-4cf5-4c98-9337-5ed44bbb0f73",
    "parentRunId": "4ac37976-6652-48fb-bf3f-277ce34a7afc",
    "timestamp": "2025-06-24T18:19:54.064Z",
    "metadata": {
      "toolName": "add",
      "toolCallId": "call_soq0QJTiJSWNnKARJyBT4a92",
      "tool_arguments": "{\"a\": 15, \"b\": 16}",
      "logfire.msg": "running tool: add",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 1.905
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "b91d8a21-5cea-4b19-bb09-529a313264af",
    "parentRunId": "c5356091-56ee-4ffe-a779-4f05adb13a5f",
    "timestamp": "2025-06-24T18:19:54.060Z",
    "metadata": {
      "tools": [
        "multiply",
        "power",
        "add"
      ],
      "logfire.msg": "running 3 tools",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "b91d8a21-5cea-4b19-bb09-529a313264af",
    "parentRunId": "c5356091-56ee-4ffe-a779-4f05adb13a5f",
    "timestamp": "2025-06-24T18:19:54.064Z",
    "metadata": {
      "tools": [
        "multiply",
        "power",
        "add"
      ],
      "logfire.msg": "running 3 tools",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 4.144
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "8fb3e3e0-4ce9-4762-9122-6870c625e97e",
    "parentRunId": "be170d95-6385-4514-a723-c9e32d489340",
    "timestamp": "2025-06-24T18:19:54.065Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"multiply\", \"description\": \"Multiply two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"add\", \"description\": \"Add two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"power\", \"description\": \"Calculate base raised to the power of exponent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"base\": {\"type\": \"integer\"}, \"exponent\": {\"type\": \"integer\"}}, \"required\": [\"base\", \"exponent\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Calculate (5 * 3) + (2^4)\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_0NxqV6iq47ADSNDPpu5XqAdj\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 5, \\\"b\\\": 3}\"}}, {\"id\": \"call_fLVgY7IGcm048AugGthHyVC6\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 2, \\\"exponent\\\": 4}\"}}, {\"id\": \"call_soq0QJTiJSWNnKARJyBT4a92\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 16}\"}}], \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": 15, \"role\": \"tool\", \"id\": \"call_0NxqV6iq47ADSNDPpu5XqAdj\", \"name\": \"multiply\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 16, \"role\": \"tool\", \"id\": \"call_fLVgY7IGcm048AugGthHyVC6\", \"name\": \"power\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 31, \"role\": \"tool\", \"id\": \"call_soq0QJTiJSWNnKARJyBT4a92\", \"name\": \"add\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"The result of \\\\( (5 \\\\times 3) + (2^4) \\\\) is 31.\"}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 207,
      "completion": 24
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "8fb3e3e0-4ce9-4762-9122-6870c625e97e",
    "parentRunId": "be170d95-6385-4514-a723-c9e32d489340",
    "timestamp": "2025-06-24T18:19:58.407Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"multiply\", \"description\": \"Multiply two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"add\", \"description\": \"Add two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"power\", \"description\": \"Calculate base raised to the power of exponent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"base\": {\"type\": \"integer\"}, \"exponent\": {\"type\": \"integer\"}}, \"required\": [\"base\", \"exponent\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Calculate (5 * 3) + (2^4)\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_0NxqV6iq47ADSNDPpu5XqAdj\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 5, \\\"b\\\": 3}\"}}, {\"id\": \"call_fLVgY7IGcm048AugGthHyVC6\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 2, \\\"exponent\\\": 4}\"}}, {\"id\": \"call_soq0QJTiJSWNnKARJyBT4a92\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 16}\"}}], \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": 15, \"role\": \"tool\", \"id\": \"call_0NxqV6iq47ADSNDPpu5XqAdj\", \"name\": \"multiply\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 16, \"role\": \"tool\", \"id\": \"call_fLVgY7IGcm048AugGthHyVC6\", \"name\": \"power\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 31, \"role\": \"tool\", \"id\": \"call_soq0QJTiJSWNnKARJyBT4a92\", \"name\": \"add\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"The result of \\\\( (5 \\\\times 3) + (2^4) \\\\) is 31.\"}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 4341.6
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 207,
      "completion": 24
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "079e1416-e601-4eb4-8fdd-8adb994eca20",
    "parentRunId": "7f74165a-24e4-42bc-a650-881982aa4598",
    "timestamp": "2025-06-24T18:19:47.331Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "math_agent",
      "logfire.msg": "math_agent run",
      "final_result": "The result of \\( (5 \\times 3) + (2^4) \\) is 31.",
      "all_messages_events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Calculate (5 * 3) + (2^4)\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_0NxqV6iq47ADSNDPpu5XqAdj\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 5, \\\"b\\\": 3}\"}}, {\"id\": \"call_fLVgY7IGcm048AugGthHyVC6\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 2, \\\"exponent\\\": 4}\"}}, {\"id\": \"call_soq0QJTiJSWNnKARJyBT4a92\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 16}\"}}], \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": 15, \"role\": \"tool\", \"id\": \"call_0NxqV6iq47ADSNDPpu5XqAdj\", \"name\": \"multiply\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 16, \"role\": \"tool\", \"id\": \"call_fLVgY7IGcm048AugGthHyVC6\", \"name\": \"power\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 31, \"role\": \"tool\", \"id\": \"call_soq0QJTiJSWNnKARJyBT4a92\", \"name\": \"add\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"role\": \"assistant\", \"content\": \"The result of \\\\( (5 \\\\times 3) + (2^4) \\\\) is 31.\", \"gen_ai.message.index\": 3, \"event.name\": \"gen_ai.assistant.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "tokensUsage": {
      "prompt": 328,
      "completion": 91
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "079e1416-e601-4eb4-8fdd-8adb994eca20",
    "parentRunId": "7f74165a-24e4-42bc-a650-881982aa4598",
    "timestamp": "2025-06-24T18:19:58.407Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "math_agent",
      "logfire.msg": "math_agent run",
      "final_result": "The result of \\( (5 \\times 3) + (2^4) \\) is 31.",
      "all_messages_events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Calculate (5 * 3) + (2^4)\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_0NxqV6iq47ADSNDPpu5XqAdj\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 5, \\\"b\\\": 3}\"}}, {\"id\": \"call_fLVgY7IGcm048AugGthHyVC6\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 2, \\\"exponent\\\": 4}\"}}, {\"id\": \"call_soq0QJTiJSWNnKARJyBT4a92\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 16}\"}}], \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": 15, \"role\": \"tool\", \"id\": \"call_0NxqV6iq47ADSNDPpu5XqAdj\", \"name\": \"multiply\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 16, \"role\": \"tool\", \"id\": \"call_fLVgY7IGcm048AugGthHyVC6\", \"name\": \"power\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 31, \"role\": \"tool\", \"id\": \"call_soq0QJTiJSWNnKARJyBT4a92\", \"name\": \"add\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"role\": \"assistant\", \"content\": \"The result of \\\\( (5 \\\\times 3) + (2^4) \\\\) is 31.\", \"gen_ai.message.index\": 3, \"event.name\": \"gen_ai.assistant.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 11076.475
    },
    "tokensUsage": {
      "prompt": 328,
      "completion": 91
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "56d84109-e66d-488c-9b3b-0101e344b5c8",
    "parentRunId": "8c27cf7a-3d82-4e6c-8366-e7aba8ec75dd",
    "timestamp": "2025-06-24T18:19:58.409Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"get_city_info\", \"description\": \"Get information about a city including weather.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"city\": {\"type\": \"string\"}}, \"required\": [\"city\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"tool\", \"output_object\": null, \"output_tools\": [{\"name\": \"final_result\", \"description\": \"The final response which ends this conversation\", \"parameters_json_schema\": {\"properties\": {\"city\": {\"type\": \"string\"}, \"reason\": {\"type\": \"string\"}, \"best_time_to_visit\": {\"type\": \"string\"}, \"must_see_attractions\": {\"items\": {\"type\": \"string\"}, \"type\": \"array\"}}, \"required\": [\"city\", \"reason\", \"best_time_to_visit\", \"must_see_attractions\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": false}], \"allow_text_output\": false}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I want to visit Paris. Should I go there now?\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_VZgLMUSv3WQ0NNvlKKHCXsbB\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Paris\\\"}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 136,
      "completion": 15
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "56d84109-e66d-488c-9b3b-0101e344b5c8",
    "parentRunId": "8c27cf7a-3d82-4e6c-8366-e7aba8ec75dd",
    "timestamp": "2025-06-24T18:19:59.223Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"get_city_info\", \"description\": \"Get information about a city including weather.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"city\": {\"type\": \"string\"}}, \"required\": [\"city\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"tool\", \"output_object\": null, \"output_tools\": [{\"name\": \"final_result\", \"description\": \"The final response which ends this conversation\", \"parameters_json_schema\": {\"properties\": {\"city\": {\"type\": \"string\"}, \"reason\": {\"type\": \"string\"}, \"best_time_to_visit\": {\"type\": \"string\"}, \"must_see_attractions\": {\"items\": {\"type\": \"string\"}, \"type\": \"array\"}}, \"required\": [\"city\", \"reason\", \"best_time_to_visit\", \"must_see_attractions\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": false}], \"allow_text_output\": false}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I want to visit Paris. Should I go there now?\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_VZgLMUSv3WQ0NNvlKKHCXsbB\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Paris\\\"}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 814.049
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 136,
      "completion": 15
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "807e4165-b6a9-40bb-92eb-cea762260b4a",
    "parentRunId": "3a3f825e-27c8-479a-9596-9d91daf0ec09",
    "timestamp": "2025-06-24T18:19:59.224Z",
    "metadata": {
      "toolName": "get_city_info",
      "toolCallId": "call_VZgLMUSv3WQ0NNvlKKHCXsbB",
      "tool_arguments": "{\"city\":\"Paris\"}",
      "logfire.msg": "running tool: get_city_info",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "807e4165-b6a9-40bb-92eb-cea762260b4a",
    "parentRunId": "3a3f825e-27c8-479a-9596-9d91daf0ec09",
    "timestamp": "2025-06-24T18:19:59.225Z",
    "metadata": {
      "toolName": "get_city_info",
      "toolCallId": "call_VZgLMUSv3WQ0NNvlKKHCXsbB",
      "tool_arguments": "{\"city\":\"Paris\"}",
      "logfire.msg": "running tool: get_city_info",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 0.75
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "9b101cbd-ffec-44c9-88e4-25a0022ddb29",
    "parentRunId": "4a6e0159-af5a-4d47-a87e-7665c0dc8ced",
    "timestamp": "2025-06-24T18:19:59.224Z",
    "metadata": {
      "tools": [
        "get_city_info"
      ],
      "logfire.msg": "running 1 tool",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "9b101cbd-ffec-44c9-88e4-25a0022ddb29",
    "parentRunId": "4a6e0159-af5a-4d47-a87e-7665c0dc8ced",
    "timestamp": "2025-06-24T18:19:59.225Z",
    "metadata": {
      "tools": [
        "get_city_info"
      ],
      "logfire.msg": "running 1 tool",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 1.028
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "d675cafd-c85a-4aa5-9722-211b5e993891",
    "parentRunId": "e9807831-d48a-468b-a4c4-d708ec9db8f3",
    "timestamp": "2025-06-24T18:19:59.225Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"get_city_info\", \"description\": \"Get information about a city including weather.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"city\": {\"type\": \"string\"}}, \"required\": [\"city\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"tool\", \"output_object\": null, \"output_tools\": [{\"name\": \"final_result\", \"description\": \"The final response which ends this conversation\", \"parameters_json_schema\": {\"properties\": {\"city\": {\"type\": \"string\"}, \"reason\": {\"type\": \"string\"}, \"best_time_to_visit\": {\"type\": \"string\"}, \"must_see_attractions\": {\"items\": {\"type\": \"string\"}, \"type\": \"array\"}}, \"required\": [\"city\", \"reason\", \"best_time_to_visit\", \"must_see_attractions\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": false}], \"allow_text_output\": false}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I want to visit Paris. Should I go there now?\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_VZgLMUSv3WQ0NNvlKKHCXsbB\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Paris\\\"}\"}}], \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": {\"city\": \"Paris\", \"weather\": {\"temperature\": 15.5, \"condition\": \"Cloudy\", \"humidity\": 65}}, \"role\": \"tool\", \"id\": \"call_VZgLMUSv3WQ0NNvlKKHCXsbB\", \"name\": \"get_city_info\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_DEc4HgdbsfZA7BsEJBr4oTv6\", \"type\": \"function\", \"function\": {\"name\": \"final_result\", \"arguments\": \"{\\\"city\\\":\\\"Paris\\\",\\\"reason\\\":\\\"The weather is currently cloudy with a temperature of 15.5\\u00b0C. It's a good time to visit and explore the city.\\\",\\\"best_time_to_visit\\\":\\\"spring or fall\\\",\\\"must_see_attractions\\\":[\\\"Eiffel Tower\\\",\\\"Louvre Museum\\\",\\\"Notre Dame Cathedral\\\"]}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 182,
      "completion": 72
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "d675cafd-c85a-4aa5-9722-211b5e993891",
    "parentRunId": "e9807831-d48a-468b-a4c4-d708ec9db8f3",
    "timestamp": "2025-06-24T18:20:00.644Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"get_city_info\", \"description\": \"Get information about a city including weather.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"city\": {\"type\": \"string\"}}, \"required\": [\"city\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"tool\", \"output_object\": null, \"output_tools\": [{\"name\": \"final_result\", \"description\": \"The final response which ends this conversation\", \"parameters_json_schema\": {\"properties\": {\"city\": {\"type\": \"string\"}, \"reason\": {\"type\": \"string\"}, \"best_time_to_visit\": {\"type\": \"string\"}, \"must_see_attractions\": {\"items\": {\"type\": \"string\"}, \"type\": \"array\"}}, \"required\": [\"city\", \"reason\", \"best_time_to_visit\", \"must_see_attractions\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": false}], \"allow_text_output\": false}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I want to visit Paris. Should I go there now?\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_VZgLMUSv3WQ0NNvlKKHCXsbB\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Paris\\\"}\"}}], \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": {\"city\": \"Paris\", \"weather\": {\"temperature\": 15.5, \"condition\": \"Cloudy\", \"humidity\": 65}}, \"role\": \"tool\", \"id\": \"call_VZgLMUSv3WQ0NNvlKKHCXsbB\", \"name\": \"get_city_info\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_DEc4HgdbsfZA7BsEJBr4oTv6\", \"type\": \"function\", \"function\": {\"name\": \"final_result\", \"arguments\": \"{\\\"city\\\":\\\"Paris\\\",\\\"reason\\\":\\\"The weather is currently cloudy with a temperature of 15.5\\u00b0C. It's a good time to visit and explore the city.\\\",\\\"best_time_to_visit\\\":\\\"spring or fall\\\",\\\"must_see_attractions\\\":[\\\"Eiffel Tower\\\",\\\"Louvre Museum\\\",\\\"Notre Dame Cathedral\\\"]}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 1418.313
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 182,
      "completion": 72
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "3520403a-83e0-474d-85f2-db4a235b19ec",
    "parentRunId": "9672a7f6-500e-4538-b0c9-5464ecf077dd",
    "timestamp": "2025-06-24T18:19:58.408Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "travel_agent",
      "logfire.msg": "travel_agent run",
      "final_result": "{\"city\": \"Paris\", \"reason\": \"The weather is currently cloudy with a temperature of 15.5\\u00b0C. It's a good time to visit and explore the city.\", \"best_time_to_visit\": \"spring or fall\", \"must_see_attractions\": [\"Eiffel Tower\", \"Louvre Museum\", \"Notre Dame Cathedral\"]}",
      "all_messages_events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I want to visit Paris. Should I go there now?\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_VZgLMUSv3WQ0NNvlKKHCXsbB\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Paris\\\"}\"}}], \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": {\"city\": \"Paris\", \"weather\": {\"temperature\": 15.5, \"condition\": \"Cloudy\", \"humidity\": 65}}, \"role\": \"tool\", \"id\": \"call_VZgLMUSv3WQ0NNvlKKHCXsbB\", \"name\": \"get_city_info\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_DEc4HgdbsfZA7BsEJBr4oTv6\", \"type\": \"function\", \"function\": {\"name\": \"final_result\", \"arguments\": \"{\\\"city\\\":\\\"Paris\\\",\\\"reason\\\":\\\"The weather is currently cloudy with a temperature of 15.5\\u00b0C. It's a good time to visit and explore the city.\\\",\\\"best_time_to_visit\\\":\\\"spring or fall\\\",\\\"must_see_attractions\\\":[\\\"Eiffel Tower\\\",\\\"Louvre Museum\\\",\\\"Notre Dame Cathedral\\\"]}\"}}], \"gen_ai.message.index\": 3, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": \"Final result processed.\", \"role\": \"tool\", \"id\": \"call_DEc4HgdbsfZA7BsEJBr4oTv6\", \"name\": \"final_result\", \"gen_ai.message.index\": 4, \"event.name\": \"gen_ai.tool.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "tokensUsage": {
      "prompt": 318,
      "completion": 87
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "3520403a-83e0-474d-85f2-db4a235b19ec",
    "parentRunId": "9672a7f6-500e-4538-b0c9-5464ecf077dd",
    "timestamp": "2025-06-24T18:20:00.645Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "travel_agent",
      "logfire.msg": "travel_agent run",
      "final_result": "{\"city\": \"Paris\", \"reason\": \"The weather is currently cloudy with a temperature of 15.5\\u00b0C. It's a good time to visit and explore the city.\", \"best_time_to_visit\": \"spring or fall\", \"must_see_attractions\": [\"Eiffel Tower\", \"Louvre Museum\", \"Notre Dame Cathedral\"]}",
      "all_messages_events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I want to visit Paris. Should I go there now?\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_VZgLMUSv3WQ0NNvlKKHCXsbB\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Paris\\\"}\"}}], \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": {\"city\": \"Paris\", \"weather\": {\"temperature\": 15.5, \"condition\": \"Cloudy\", \"humidity\": 65}}, \"role\": \"tool\", \"id\": \"call_VZgLMUSv3WQ0NNvlKKHCXsbB\", \"name\": \"get_city_info\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_DEc4HgdbsfZA7BsEJBr4oTv6\", \"type\": \"function\", \"function\": {\"name\": \"final_result\", \"arguments\": \"{\\\"city\\\":\\\"Paris\\\",\\\"reason\\\":\\\"The weather is currently cloudy with a temperature of 15.5\\u00b0C. It's a good time to visit and explore the city.\\\",\\\"best_time_to_visit\\\":\\\"spring or fall\\\",\\\"must_see_attractions\\\":[\\\"Eiffel Tower\\\",\\\"Louvre Museum\\\",\\\"Notre Dame Cathedral\\\"]}\"}}], \"gen_ai.message.index\": 3, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": \"Final result processed.\", \"role\": \"tool\", \"id\": \"call_DEc4HgdbsfZA7BsEJBr4oTv6\", \"name\": \"final_result\", \"gen_ai.message.index\": 4, \"event.name\": \"gen_ai.tool.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 2236.371
    },
    "tokensUsage": {
      "prompt": 318,
      "completion": 87
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "cc130b50-b1f2-446d-ade5-820f25b056fe",
    "parentRunId": "98f747b4-6a1b-4173-8d98-3f98003d1b5e",
    "timestamp": "2025-06-24T18:20:00.646Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"analyze_with_math_agent\", \"description\": \"Delegate mathematical questions to the math agent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"question\": {\"type\": \"string\"}}, \"required\": [\"question\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"get_travel_advice\", \"description\": \"Get travel recommendations from the travel agent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"destination\": {\"type\": \"string\"}}, \"required\": [\"destination\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a research coordinator. Delegate tasks to specialized agents.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I need two things: 1) Calculate 15 * 7 + 3^2, and 2) Get travel advice for Tokyo\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_8aFRPk3dtOnX4bz6LQThL7ap\", \"type\": \"function\", \"function\": {\"name\": \"analyze_with_math_agent\", \"arguments\": \"{\\\"question\\\": \\\"15 * 7 + 3^2\\\"}\"}}, {\"id\": \"call_OUv8DyfzPk3v82BdHPgvTIAf\", \"type\": \"function\", \"function\": {\"name\": \"get_travel_advice\", \"arguments\": \"{\\\"destination\\\": \\\"Tokyo\\\"}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 114,
      "completion": 57
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "cc130b50-b1f2-446d-ade5-820f25b056fe",
    "parentRunId": "98f747b4-6a1b-4173-8d98-3f98003d1b5e",
    "timestamp": "2025-06-24T18:20:05.747Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"analyze_with_math_agent\", \"description\": \"Delegate mathematical questions to the math agent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"question\": {\"type\": \"string\"}}, \"required\": [\"question\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"get_travel_advice\", \"description\": \"Get travel recommendations from the travel agent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"destination\": {\"type\": \"string\"}}, \"required\": [\"destination\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a research coordinator. Delegate tasks to specialized agents.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I need two things: 1) Calculate 15 * 7 + 3^2, and 2) Get travel advice for Tokyo\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_8aFRPk3dtOnX4bz6LQThL7ap\", \"type\": \"function\", \"function\": {\"name\": \"analyze_with_math_agent\", \"arguments\": \"{\\\"question\\\": \\\"15 * 7 + 3^2\\\"}\"}}, {\"id\": \"call_OUv8DyfzPk3v82BdHPgvTIAf\", \"type\": \"function\", \"function\": {\"name\": \"get_travel_advice\", \"arguments\": \"{\\\"destination\\\": \\\"Tokyo\\\"}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 5101.542
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 114,
      "completion": 57
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "c66f4c09-e166-4842-864e-83da775decae",
    "timestamp": "2025-06-24T18:19:47.330Z",
    "metadata": {
      "test.name": "tools_agent",
      "langfuse.tags": [
        "math",
        "tools"
      ],
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "c66f4c09-e166-4842-864e-83da775decae",
    "timestamp": "2025-06-24T18:19:58.407Z",
    "metadata": {
      "test.name": "tools_agent",
      "langfuse.tags": [
        "math",
        "tools"
      ],
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 11077.107
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "ba37975d-c518-46a2-a712-fb002b4bc291",
    "timestamp": "2025-06-24T18:19:58.407Z",
    "metadata": {
      "test.name": "complex_agent",
      "langfuse.session.id": "session-123",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "ba37975d-c518-46a2-a712-fb002b4bc291",
    "timestamp": "2025-06-24T18:20:00.645Z",
    "metadata": {
      "test.name": "complex_agent",
      "langfuse.session.id": "session-123",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 2237.428
    }
  }
]
Using project key: 07ff18c9-f052-4260-9e89-ea93fe9ba8c5

ðŸ”­ Received traces: 1 ResourceSpans
Resource attributes: {
  "telemetry.sdk.language": "python",
  "telemetry.sdk.name": "opentelemetry",
  "telemetry.sdk.version": "1.34.1",
  "service.name": "pydantic-ai-test",
  "lunary.project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
}
Processing span chat gpt-3.5-turbo -> 2 events
Processing span running tool -> 2 events
Processing span running tool -> 2 events
Processing span running tool -> 2 events
Processing span running tools -> 2 events
Processing span chat gpt-3.5-turbo -> 2 events
Processing span running tool -> 2 events
Processing span running tools -> 2 events
Processing span chat gpt-3.5-turbo -> 2 events
Processing span agent run -> 2 events
Processing span running tool -> 2 events
Processing span chat gpt-3.5-turbo -> 2 events
Processing span agent run -> 2 events
Processing span running tool -> 2 events
Processing span running tools -> 2 events
Processing span chat gpt-3.5-turbo -> 2 events
Processing span agent run -> 2 events
Processing span test-4-nested-agents -> 2 events

ðŸ“¥ Forwarding 36 events to backend
Events: [
  {
    "type": "llm",
    "event": "start",
    "runId": "cb8df35c-44d4-4460-8778-e123aba5dd46",
    "parentRunId": "4df208ce-7a92-4929-89d7-29699c77c9e8",
    "timestamp": "2025-06-24T18:20:05.751Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"multiply\", \"description\": \"Multiply two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"add\", \"description\": \"Add two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"power\", \"description\": \"Calculate base raised to the power of exponent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"base\": {\"type\": \"integer\"}, \"exponent\": {\"type\": \"integer\"}}, \"required\": [\"base\", \"exponent\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"15 * 7 + 3^2\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_CoQFoEptKCUA8MaBq3PIwF21\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 7}\"}}, {\"id\": \"call_l223xvNQXKRvnpkbk2BU5Z1O\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 3, \\\"exponent\\\": 2}\"}}, {\"id\": \"call_7L4D6GpYctnoaYqFl7kmXMaW\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 105, \\\"b\\\": 9}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 117,
      "completion": 67
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "cb8df35c-44d4-4460-8778-e123aba5dd46",
    "parentRunId": "4df208ce-7a92-4929-89d7-29699c77c9e8",
    "timestamp": "2025-06-24T18:20:06.949Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"multiply\", \"description\": \"Multiply two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"add\", \"description\": \"Add two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"power\", \"description\": \"Calculate base raised to the power of exponent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"base\": {\"type\": \"integer\"}, \"exponent\": {\"type\": \"integer\"}}, \"required\": [\"base\", \"exponent\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"15 * 7 + 3^2\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_CoQFoEptKCUA8MaBq3PIwF21\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 7}\"}}, {\"id\": \"call_l223xvNQXKRvnpkbk2BU5Z1O\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 3, \\\"exponent\\\": 2}\"}}, {\"id\": \"call_7L4D6GpYctnoaYqFl7kmXMaW\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 105, \\\"b\\\": 9}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 1198.639
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 117,
      "completion": 67
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "7d55562f-6945-41d6-89db-fabc4175416a",
    "parentRunId": "0910c83b-7a86-44ad-bca3-dcc4113459be",
    "timestamp": "2025-06-24T18:20:06.950Z",
    "metadata": {
      "toolName": "multiply",
      "toolCallId": "call_CoQFoEptKCUA8MaBq3PIwF21",
      "tool_arguments": "{\"a\": 15, \"b\": 7}",
      "logfire.msg": "running tool: multiply",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "7d55562f-6945-41d6-89db-fabc4175416a",
    "parentRunId": "0910c83b-7a86-44ad-bca3-dcc4113459be",
    "timestamp": "2025-06-24T18:20:06.950Z",
    "metadata": {
      "toolName": "multiply",
      "toolCallId": "call_CoQFoEptKCUA8MaBq3PIwF21",
      "tool_arguments": "{\"a\": 15, \"b\": 7}",
      "logfire.msg": "running tool: multiply",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 0.567
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "4c4846c0-b8e5-4c11-aa01-ba15c3602123",
    "parentRunId": "f0b16941-a4d0-4a37-bfe4-3ab0c5eeb703",
    "timestamp": "2025-06-24T18:20:06.950Z",
    "metadata": {
      "toolName": "add",
      "toolCallId": "call_7L4D6GpYctnoaYqFl7kmXMaW",
      "tool_arguments": "{\"a\": 105, \"b\": 9}",
      "logfire.msg": "running tool: add",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "4c4846c0-b8e5-4c11-aa01-ba15c3602123",
    "parentRunId": "f0b16941-a4d0-4a37-bfe4-3ab0c5eeb703",
    "timestamp": "2025-06-24T18:20:06.950Z",
    "metadata": {
      "toolName": "add",
      "toolCallId": "call_7L4D6GpYctnoaYqFl7kmXMaW",
      "tool_arguments": "{\"a\": 105, \"b\": 9}",
      "logfire.msg": "running tool: add",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 0.525
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "034fb84c-2b0a-4708-9fa3-e5e0c21ffd40",
    "parentRunId": "d18e8848-690f-4994-b839-c8a660a10682",
    "timestamp": "2025-06-24T18:20:06.950Z",
    "metadata": {
      "toolName": "power",
      "toolCallId": "call_l223xvNQXKRvnpkbk2BU5Z1O",
      "tool_arguments": "{\"base\": 3, \"exponent\": 2}",
      "logfire.msg": "running tool: power",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "034fb84c-2b0a-4708-9fa3-e5e0c21ffd40",
    "parentRunId": "d18e8848-690f-4994-b839-c8a660a10682",
    "timestamp": "2025-06-24T18:20:06.950Z",
    "metadata": {
      "toolName": "power",
      "toolCallId": "call_l223xvNQXKRvnpkbk2BU5Z1O",
      "tool_arguments": "{\"base\": 3, \"exponent\": 2}",
      "logfire.msg": "running tool: power",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 0.572
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "83ab3feb-eb16-4c33-94e1-dfd924a7cdb3",
    "parentRunId": "079d455d-c697-4229-b548-399bfadb68f3",
    "timestamp": "2025-06-24T18:20:06.950Z",
    "metadata": {
      "tools": [
        "multiply",
        "power",
        "add"
      ],
      "logfire.msg": "running 3 tools",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "83ab3feb-eb16-4c33-94e1-dfd924a7cdb3",
    "parentRunId": "079d455d-c697-4229-b548-399bfadb68f3",
    "timestamp": "2025-06-24T18:20:06.950Z",
    "metadata": {
      "tools": [
        "multiply",
        "power",
        "add"
      ],
      "logfire.msg": "running 3 tools",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 0.778
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "df97b2d2-1512-47b0-8ce8-ec9513aaaf34",
    "parentRunId": "f890d888-d97d-4b88-9bb1-cafd46589a04",
    "timestamp": "2025-06-24T18:20:05.753Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"get_city_info\", \"description\": \"Get information about a city including weather.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"city\": {\"type\": \"string\"}}, \"required\": [\"city\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"tool\", \"output_object\": null, \"output_tools\": [{\"name\": \"final_result\", \"description\": \"The final response which ends this conversation\", \"parameters_json_schema\": {\"properties\": {\"city\": {\"type\": \"string\"}, \"reason\": {\"type\": \"string\"}, \"best_time_to_visit\": {\"type\": \"string\"}, \"must_see_attractions\": {\"items\": {\"type\": \"string\"}, \"type\": \"array\"}}, \"required\": [\"city\", \"reason\", \"best_time_to_visit\", \"must_see_attractions\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": false}], \"allow_text_output\": false}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Recommend travel to Tokyo\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_NaE6dHJWeRIdWjtvmBtr6goZ\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Tokyo\\\"}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 128,
      "completion": 16
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "df97b2d2-1512-47b0-8ce8-ec9513aaaf34",
    "parentRunId": "f890d888-d97d-4b88-9bb1-cafd46589a04",
    "timestamp": "2025-06-24T18:20:07.157Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"get_city_info\", \"description\": \"Get information about a city including weather.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"city\": {\"type\": \"string\"}}, \"required\": [\"city\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"tool\", \"output_object\": null, \"output_tools\": [{\"name\": \"final_result\", \"description\": \"The final response which ends this conversation\", \"parameters_json_schema\": {\"properties\": {\"city\": {\"type\": \"string\"}, \"reason\": {\"type\": \"string\"}, \"best_time_to_visit\": {\"type\": \"string\"}, \"must_see_attractions\": {\"items\": {\"type\": \"string\"}, \"type\": \"array\"}}, \"required\": [\"city\", \"reason\", \"best_time_to_visit\", \"must_see_attractions\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": false}], \"allow_text_output\": false}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Recommend travel to Tokyo\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_NaE6dHJWeRIdWjtvmBtr6goZ\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Tokyo\\\"}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 1404.003
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 128,
      "completion": 16
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "38ec1491-97e1-40f3-a2ca-260b0728cc90",
    "parentRunId": "58182041-f10a-425d-a885-c9d9df0e9c04",
    "timestamp": "2025-06-24T18:20:07.157Z",
    "metadata": {
      "toolName": "get_city_info",
      "toolCallId": "call_NaE6dHJWeRIdWjtvmBtr6goZ",
      "tool_arguments": "{\"city\":\"Tokyo\"}",
      "logfire.msg": "running tool: get_city_info",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "38ec1491-97e1-40f3-a2ca-260b0728cc90",
    "parentRunId": "58182041-f10a-425d-a885-c9d9df0e9c04",
    "timestamp": "2025-06-24T18:20:07.158Z",
    "metadata": {
      "toolName": "get_city_info",
      "toolCallId": "call_NaE6dHJWeRIdWjtvmBtr6goZ",
      "tool_arguments": "{\"city\":\"Tokyo\"}",
      "logfire.msg": "running tool: get_city_info",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 0.243
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "9c69b953-cce3-4329-9711-ecd21dc1421e",
    "parentRunId": "6ec1a89b-b18b-496c-b7f0-01fa38a2e22b",
    "timestamp": "2025-06-24T18:20:07.157Z",
    "metadata": {
      "tools": [
        "get_city_info"
      ],
      "logfire.msg": "running 1 tool",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "9c69b953-cce3-4329-9711-ecd21dc1421e",
    "parentRunId": "6ec1a89b-b18b-496c-b7f0-01fa38a2e22b",
    "timestamp": "2025-06-24T18:20:07.158Z",
    "metadata": {
      "tools": [
        "get_city_info"
      ],
      "logfire.msg": "running 1 tool",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 0.36
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "b0355ee0-3a18-4868-ac25-83b3a88ec54c",
    "parentRunId": "ab09ea99-44c2-4ac3-88ba-2e43e6d46d2d",
    "timestamp": "2025-06-24T18:20:07.158Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"get_city_info\", \"description\": \"Get information about a city including weather.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"city\": {\"type\": \"string\"}}, \"required\": [\"city\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"tool\", \"output_object\": null, \"output_tools\": [{\"name\": \"final_result\", \"description\": \"The final response which ends this conversation\", \"parameters_json_schema\": {\"properties\": {\"city\": {\"type\": \"string\"}, \"reason\": {\"type\": \"string\"}, \"best_time_to_visit\": {\"type\": \"string\"}, \"must_see_attractions\": {\"items\": {\"type\": \"string\"}, \"type\": \"array\"}}, \"required\": [\"city\", \"reason\", \"best_time_to_visit\", \"must_see_attractions\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": false}], \"allow_text_output\": false}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Recommend travel to Tokyo\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_NaE6dHJWeRIdWjtvmBtr6goZ\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Tokyo\\\"}\"}}], \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": {\"city\": \"Tokyo\", \"weather\": {\"temperature\": 22.0, \"condition\": \"Sunny\", \"humidity\": 45}}, \"role\": \"tool\", \"id\": \"call_NaE6dHJWeRIdWjtvmBtr6goZ\", \"name\": \"get_city_info\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_kxP5OodfR8btVMC8z5KiF6Lh\", \"type\": \"function\", \"function\": {\"name\": \"final_result\", \"arguments\": \"{\\\"city\\\": \\\"Tokyo\\\", \\\"reason\\\": \\\"The weather is sunny and the temperature is 22\\u00b0C, making it a great time to visit.\\\", \\\"best_time_to_visit\\\": \\\"spring or autumn\\\", \\\"must_see_attractions\\\": [\\\"Senso-ji Temple\\\", \\\"Shibuya Crossing\\\", \\\"Tokyo Disneyland\\\"]}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 176,
      "completion": 83
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "b0355ee0-3a18-4868-ac25-83b3a88ec54c",
    "parentRunId": "ab09ea99-44c2-4ac3-88ba-2e43e6d46d2d",
    "timestamp": "2025-06-24T18:20:08.442Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"get_city_info\", \"description\": \"Get information about a city including weather.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"city\": {\"type\": \"string\"}}, \"required\": [\"city\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"tool\", \"output_object\": null, \"output_tools\": [{\"name\": \"final_result\", \"description\": \"The final response which ends this conversation\", \"parameters_json_schema\": {\"properties\": {\"city\": {\"type\": \"string\"}, \"reason\": {\"type\": \"string\"}, \"best_time_to_visit\": {\"type\": \"string\"}, \"must_see_attractions\": {\"items\": {\"type\": \"string\"}, \"type\": \"array\"}}, \"required\": [\"city\", \"reason\", \"best_time_to_visit\", \"must_see_attractions\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": false}], \"allow_text_output\": false}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Recommend travel to Tokyo\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_NaE6dHJWeRIdWjtvmBtr6goZ\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Tokyo\\\"}\"}}], \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": {\"city\": \"Tokyo\", \"weather\": {\"temperature\": 22.0, \"condition\": \"Sunny\", \"humidity\": 45}}, \"role\": \"tool\", \"id\": \"call_NaE6dHJWeRIdWjtvmBtr6goZ\", \"name\": \"get_city_info\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_kxP5OodfR8btVMC8z5KiF6Lh\", \"type\": \"function\", \"function\": {\"name\": \"final_result\", \"arguments\": \"{\\\"city\\\": \\\"Tokyo\\\", \\\"reason\\\": \\\"The weather is sunny and the temperature is 22\\u00b0C, making it a great time to visit.\\\", \\\"best_time_to_visit\\\": \\\"spring or autumn\\\", \\\"must_see_attractions\\\": [\\\"Senso-ji Temple\\\", \\\"Shibuya Crossing\\\", \\\"Tokyo Disneyland\\\"]}\"}}]}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 1283.749
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 176,
      "completion": 83
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "d43c26ad-a089-42a8-b8f7-12b288af646e",
    "parentRunId": "e31d6ff5-5752-41a1-9ed9-6898fd2dd377",
    "timestamp": "2025-06-24T18:20:05.750Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "travel_agent",
      "logfire.msg": "travel_agent run",
      "final_result": "{\"city\": \"Tokyo\", \"reason\": \"The weather is sunny and the temperature is 22\\u00b0C, making it a great time to visit.\", \"best_time_to_visit\": \"spring or autumn\", \"must_see_attractions\": [\"Senso-ji Temple\", \"Shibuya Crossing\", \"Tokyo Disneyland\"]}",
      "all_messages_events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Recommend travel to Tokyo\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_NaE6dHJWeRIdWjtvmBtr6goZ\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Tokyo\\\"}\"}}], \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": {\"city\": \"Tokyo\", \"weather\": {\"temperature\": 22.0, \"condition\": \"Sunny\", \"humidity\": 45}}, \"role\": \"tool\", \"id\": \"call_NaE6dHJWeRIdWjtvmBtr6goZ\", \"name\": \"get_city_info\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_kxP5OodfR8btVMC8z5KiF6Lh\", \"type\": \"function\", \"function\": {\"name\": \"final_result\", \"arguments\": \"{\\\"city\\\": \\\"Tokyo\\\", \\\"reason\\\": \\\"The weather is sunny and the temperature is 22\\u00b0C, making it a great time to visit.\\\", \\\"best_time_to_visit\\\": \\\"spring or autumn\\\", \\\"must_see_attractions\\\": [\\\"Senso-ji Temple\\\", \\\"Shibuya Crossing\\\", \\\"Tokyo Disneyland\\\"]}\"}}], \"gen_ai.message.index\": 3, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": \"Final result processed.\", \"role\": \"tool\", \"id\": \"call_kxP5OodfR8btVMC8z5KiF6Lh\", \"name\": \"final_result\", \"gen_ai.message.index\": 4, \"event.name\": \"gen_ai.tool.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "tokensUsage": {
      "prompt": 304,
      "completion": 99
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "d43c26ad-a089-42a8-b8f7-12b288af646e",
    "parentRunId": "e31d6ff5-5752-41a1-9ed9-6898fd2dd377",
    "timestamp": "2025-06-24T18:20:08.442Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "travel_agent",
      "logfire.msg": "travel_agent run",
      "final_result": "{\"city\": \"Tokyo\", \"reason\": \"The weather is sunny and the temperature is 22\\u00b0C, making it a great time to visit.\", \"best_time_to_visit\": \"spring or autumn\", \"must_see_attractions\": [\"Senso-ji Temple\", \"Shibuya Crossing\", \"Tokyo Disneyland\"]}",
      "all_messages_events": "[{\"content\": \"You are a travel recommendation expert. \\n    Use the weather service to check current conditions and provide travel recommendations.\\n    Always provide specific attractions and the best time to visit.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Recommend travel to Tokyo\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_NaE6dHJWeRIdWjtvmBtr6goZ\", \"type\": \"function\", \"function\": {\"name\": \"get_city_info\", \"arguments\": \"{\\\"city\\\":\\\"Tokyo\\\"}\"}}], \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": {\"city\": \"Tokyo\", \"weather\": {\"temperature\": 22.0, \"condition\": \"Sunny\", \"humidity\": 45}}, \"role\": \"tool\", \"id\": \"call_NaE6dHJWeRIdWjtvmBtr6goZ\", \"name\": \"get_city_info\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_kxP5OodfR8btVMC8z5KiF6Lh\", \"type\": \"function\", \"function\": {\"name\": \"final_result\", \"arguments\": \"{\\\"city\\\": \\\"Tokyo\\\", \\\"reason\\\": \\\"The weather is sunny and the temperature is 22\\u00b0C, making it a great time to visit.\\\", \\\"best_time_to_visit\\\": \\\"spring or autumn\\\", \\\"must_see_attractions\\\": [\\\"Senso-ji Temple\\\", \\\"Shibuya Crossing\\\", \\\"Tokyo Disneyland\\\"]}\"}}], \"gen_ai.message.index\": 3, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": \"Final result processed.\", \"role\": \"tool\", \"id\": \"call_kxP5OodfR8btVMC8z5KiF6Lh\", \"name\": \"final_result\", \"gen_ai.message.index\": 4, \"event.name\": \"gen_ai.tool.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 2692.296
    },
    "tokensUsage": {
      "prompt": 304,
      "completion": 99
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "02a677e1-c149-47fb-9e94-4bbe54529163",
    "parentRunId": "dce3de62-23c5-427a-aec8-8378da94f480",
    "timestamp": "2025-06-24T18:20:05.750Z",
    "metadata": {
      "toolName": "get_travel_advice",
      "toolCallId": "call_OUv8DyfzPk3v82BdHPgvTIAf",
      "tool_arguments": "{\"destination\": \"Tokyo\"}",
      "logfire.msg": "running tool: get_travel_advice",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "02a677e1-c149-47fb-9e94-4bbe54529163",
    "parentRunId": "dce3de62-23c5-427a-aec8-8378da94f480",
    "timestamp": "2025-06-24T18:20:08.443Z",
    "metadata": {
      "toolName": "get_travel_advice",
      "toolCallId": "call_OUv8DyfzPk3v82BdHPgvTIAf",
      "tool_arguments": "{\"destination\": \"Tokyo\"}",
      "logfire.msg": "running tool: get_travel_advice",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 2692.999
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "1d0d5a53-68fc-4c32-bb7b-60d199aaf4f0",
    "parentRunId": "eec4e001-b74b-424f-8e16-4b1e981ef3e2",
    "timestamp": "2025-06-24T18:20:06.951Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"multiply\", \"description\": \"Multiply two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"add\", \"description\": \"Add two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"power\", \"description\": \"Calculate base raised to the power of exponent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"base\": {\"type\": \"integer\"}, \"exponent\": {\"type\": \"integer\"}}, \"required\": [\"base\", \"exponent\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"15 * 7 + 3^2\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_CoQFoEptKCUA8MaBq3PIwF21\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 7}\"}}, {\"id\": \"call_l223xvNQXKRvnpkbk2BU5Z1O\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 3, \\\"exponent\\\": 2}\"}}, {\"id\": \"call_7L4D6GpYctnoaYqFl7kmXMaW\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 105, \\\"b\\\": 9}\"}}], \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": 105, \"role\": \"tool\", \"id\": \"call_CoQFoEptKCUA8MaBq3PIwF21\", \"name\": \"multiply\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 9, \"role\": \"tool\", \"id\": \"call_l223xvNQXKRvnpkbk2BU5Z1O\", \"name\": \"power\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 114, \"role\": \"tool\", \"id\": \"call_7L4D6GpYctnoaYqFl7kmXMaW\", \"name\": \"add\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"The result of \\\\(15 \\\\times 7\\\\) is 105, \\\\(3^2\\\\) is 9, and the sum of 105 and 9 is 114.\"}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 203,
      "completion": 37
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "1d0d5a53-68fc-4c32-bb7b-60d199aaf4f0",
    "parentRunId": "eec4e001-b74b-424f-8e16-4b1e981ef3e2",
    "timestamp": "2025-06-24T18:20:16.934Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"multiply\", \"description\": \"Multiply two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"add\", \"description\": \"Add two numbers.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"a\": {\"type\": \"integer\"}, \"b\": {\"type\": \"integer\"}}, \"required\": [\"a\", \"b\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"power\", \"description\": \"Calculate base raised to the power of exponent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"base\": {\"type\": \"integer\"}, \"exponent\": {\"type\": \"integer\"}}, \"required\": [\"base\", \"exponent\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"15 * 7 + 3^2\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_CoQFoEptKCUA8MaBq3PIwF21\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 7}\"}}, {\"id\": \"call_l223xvNQXKRvnpkbk2BU5Z1O\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 3, \\\"exponent\\\": 2}\"}}, {\"id\": \"call_7L4D6GpYctnoaYqFl7kmXMaW\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 105, \\\"b\\\": 9}\"}}], \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": 105, \"role\": \"tool\", \"id\": \"call_CoQFoEptKCUA8MaBq3PIwF21\", \"name\": \"multiply\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 9, \"role\": \"tool\", \"id\": \"call_l223xvNQXKRvnpkbk2BU5Z1O\", \"name\": \"power\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 114, \"role\": \"tool\", \"id\": \"call_7L4D6GpYctnoaYqFl7kmXMaW\", \"name\": \"add\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"The result of \\\\(15 \\\\times 7\\\\) is 105, \\\\(3^2\\\\) is 9, and the sum of 105 and 9 is 114.\"}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 9982.973
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 203,
      "completion": 37
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "a6f85048-8c17-4f40-bb48-2704a70cd8d1",
    "parentRunId": "b44d81c0-a271-49fe-a485-623bd76b3049",
    "timestamp": "2025-06-24T18:20:05.749Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "math_agent",
      "logfire.msg": "math_agent run",
      "final_result": "The result of \\(15 \\times 7\\) is 105, \\(3^2\\) is 9, and the sum of 105 and 9 is 114.",
      "all_messages_events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"15 * 7 + 3^2\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_CoQFoEptKCUA8MaBq3PIwF21\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 7}\"}}, {\"id\": \"call_l223xvNQXKRvnpkbk2BU5Z1O\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 3, \\\"exponent\\\": 2}\"}}, {\"id\": \"call_7L4D6GpYctnoaYqFl7kmXMaW\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 105, \\\"b\\\": 9}\"}}], \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": 105, \"role\": \"tool\", \"id\": \"call_CoQFoEptKCUA8MaBq3PIwF21\", \"name\": \"multiply\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 9, \"role\": \"tool\", \"id\": \"call_l223xvNQXKRvnpkbk2BU5Z1O\", \"name\": \"power\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 114, \"role\": \"tool\", \"id\": \"call_7L4D6GpYctnoaYqFl7kmXMaW\", \"name\": \"add\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"role\": \"assistant\", \"content\": \"The result of \\\\(15 \\\\times 7\\\\) is 105, \\\\(3^2\\\\) is 9, and the sum of 105 and 9 is 114.\", \"gen_ai.message.index\": 3, \"event.name\": \"gen_ai.assistant.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "tokensUsage": {
      "prompt": 320,
      "completion": 104
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "a6f85048-8c17-4f40-bb48-2704a70cd8d1",
    "parentRunId": "b44d81c0-a271-49fe-a485-623bd76b3049",
    "timestamp": "2025-06-24T18:20:16.935Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "math_agent",
      "logfire.msg": "math_agent run",
      "final_result": "The result of \\(15 \\times 7\\) is 105, \\(3^2\\) is 9, and the sum of 105 and 9 is 114.",
      "all_messages_events": "[{\"content\": \"You are a mathematical assistant. Use the provided tools to solve problems.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"15 * 7 + 3^2\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_CoQFoEptKCUA8MaBq3PIwF21\", \"type\": \"function\", \"function\": {\"name\": \"multiply\", \"arguments\": \"{\\\"a\\\": 15, \\\"b\\\": 7}\"}}, {\"id\": \"call_l223xvNQXKRvnpkbk2BU5Z1O\", \"type\": \"function\", \"function\": {\"name\": \"power\", \"arguments\": \"{\\\"base\\\": 3, \\\"exponent\\\": 2}\"}}, {\"id\": \"call_7L4D6GpYctnoaYqFl7kmXMaW\", \"type\": \"function\", \"function\": {\"name\": \"add\", \"arguments\": \"{\\\"a\\\": 105, \\\"b\\\": 9}\"}}], \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": 105, \"role\": \"tool\", \"id\": \"call_CoQFoEptKCUA8MaBq3PIwF21\", \"name\": \"multiply\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 9, \"role\": \"tool\", \"id\": \"call_l223xvNQXKRvnpkbk2BU5Z1O\", \"name\": \"power\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": 114, \"role\": \"tool\", \"id\": \"call_7L4D6GpYctnoaYqFl7kmXMaW\", \"name\": \"add\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"role\": \"assistant\", \"content\": \"The result of \\\\(15 \\\\times 7\\\\) is 105, \\\\(3^2\\\\) is 9, and the sum of 105 and 9 is 114.\", \"gen_ai.message.index\": 3, \"event.name\": \"gen_ai.assistant.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 11185.507
    },
    "tokensUsage": {
      "prompt": 320,
      "completion": 104
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "f1978bae-7be3-4696-a5c5-bc63a7adba28",
    "parentRunId": "d7813235-297e-4081-b10f-4cfde94513b3",
    "timestamp": "2025-06-24T18:20:05.748Z",
    "metadata": {
      "toolName": "analyze_with_math_agent",
      "toolCallId": "call_8aFRPk3dtOnX4bz6LQThL7ap",
      "tool_arguments": "{\"question\": \"15 * 7 + 3^2\"}",
      "logfire.msg": "running tool: analyze_with_math_agent",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "f1978bae-7be3-4696-a5c5-bc63a7adba28",
    "parentRunId": "d7813235-297e-4081-b10f-4cfde94513b3",
    "timestamp": "2025-06-24T18:20:16.935Z",
    "metadata": {
      "toolName": "analyze_with_math_agent",
      "toolCallId": "call_8aFRPk3dtOnX4bz6LQThL7ap",
      "tool_arguments": "{\"question\": \"15 * 7 + 3^2\"}",
      "logfire.msg": "running tool: analyze_with_math_agent",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"tool_arguments\": {\"type\": \"object\"}, \"gen_ai.tool.name\": {}, \"gen_ai.tool.call.id\": {}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 11186.711
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "969e3362-a183-4876-ad30-7bea15af0b49",
    "parentRunId": "3fae8476-e76c-4510-aea3-c356a6d17759",
    "timestamp": "2025-06-24T18:20:05.748Z",
    "metadata": {
      "tools": [
        "analyze_with_math_agent",
        "get_travel_advice"
      ],
      "logfire.msg": "running 2 tools",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "969e3362-a183-4876-ad30-7bea15af0b49",
    "parentRunId": "3fae8476-e76c-4510-aea3-c356a6d17759",
    "timestamp": "2025-06-24T18:20:16.935Z",
    "metadata": {
      "tools": [
        "analyze_with_math_agent",
        "get_travel_advice"
      ],
      "logfire.msg": "running 2 tools",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 11187.022
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "8bc6da22-8a10-4399-a501-a09e10e50dfb",
    "parentRunId": "c74fda64-a46d-4861-bbcd-343c044f955b",
    "timestamp": "2025-06-24T18:20:16.936Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"analyze_with_math_agent\", \"description\": \"Delegate mathematical questions to the math agent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"question\": {\"type\": \"string\"}}, \"required\": [\"question\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"get_travel_advice\", \"description\": \"Get travel recommendations from the travel agent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"destination\": {\"type\": \"string\"}}, \"required\": [\"destination\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a research coordinator. Delegate tasks to specialized agents.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I need two things: 1) Calculate 15 * 7 + 3^2, and 2) Get travel advice for Tokyo\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_8aFRPk3dtOnX4bz6LQThL7ap\", \"type\": \"function\", \"function\": {\"name\": \"analyze_with_math_agent\", \"arguments\": \"{\\\"question\\\": \\\"15 * 7 + 3^2\\\"}\"}}, {\"id\": \"call_OUv8DyfzPk3v82BdHPgvTIAf\", \"type\": \"function\", \"function\": {\"name\": \"get_travel_advice\", \"arguments\": \"{\\\"destination\\\": \\\"Tokyo\\\"}\"}}], \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": \"Math analysis result: The result of \\\\(15 \\\\times 7\\\\) is 105, \\\\(3^2\\\\) is 9, and the sum of 105 and 9 is 114.\", \"role\": \"tool\", \"id\": \"call_8aFRPk3dtOnX4bz6LQThL7ap\", \"name\": \"analyze_with_math_agent\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": \"Travel advice: {\\\"city\\\":\\\"Tokyo\\\",\\\"reason\\\":\\\"The weather is sunny and the temperature is 22\\u00b0C, making it a great time to visit.\\\",\\\"best_time_to_visit\\\":\\\"spring or autumn\\\",\\\"must_see_attractions\\\":[\\\"Senso-ji Temple\\\",\\\"Shibuya Crossing\\\",\\\"Tokyo Disneyland\\\"]}\", \"role\": \"tool\", \"id\": \"call_OUv8DyfzPk3v82BdHPgvTIAf\", \"name\": \"get_travel_advice\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"1) The result of \\\\(15 \\\\times 7 + 3^2\\\\) is 114.\\n\\n2) Travel advice for Tokyo:\\n- City: Tokyo\\n- Reason: The weather is sunny, with a temperature of 22\\u00b0C, making it a great time to visit.\\n- Best time to visit: Spring or autumn\\n- Must-see attractions: Senso-ji Temple, Shibuya Crossing, Tokyo Disneyland\"}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 299,
      "completion": 86
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "8bc6da22-8a10-4399-a501-a09e10e50dfb",
    "parentRunId": "c74fda64-a46d-4861-bbcd-343c044f955b",
    "timestamp": "2025-06-24T18:20:21.591Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [{\"name\": \"analyze_with_math_agent\", \"description\": \"Delegate mathematical questions to the math agent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"question\": {\"type\": \"string\"}}, \"required\": [\"question\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}, {\"name\": \"get_travel_advice\", \"description\": \"Get travel recommendations from the travel agent.\", \"parameters_json_schema\": {\"additionalProperties\": false, \"properties\": {\"destination\": {\"type\": \"string\"}}, \"required\": [\"destination\"], \"type\": \"object\"}, \"outer_typed_dict_key\": null, \"strict\": true}], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo-0125",
      "events": "[{\"content\": \"You are a research coordinator. Delegate tasks to specialized agents.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I need two things: 1) Calculate 15 * 7 + 3^2, and 2) Get travel advice for Tokyo\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_8aFRPk3dtOnX4bz6LQThL7ap\", \"type\": \"function\", \"function\": {\"name\": \"analyze_with_math_agent\", \"arguments\": \"{\\\"question\\\": \\\"15 * 7 + 3^2\\\"}\"}}, {\"id\": \"call_OUv8DyfzPk3v82BdHPgvTIAf\", \"type\": \"function\", \"function\": {\"name\": \"get_travel_advice\", \"arguments\": \"{\\\"destination\\\": \\\"Tokyo\\\"}\"}}], \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": \"Math analysis result: The result of \\\\(15 \\\\times 7\\\\) is 105, \\\\(3^2\\\\) is 9, and the sum of 105 and 9 is 114.\", \"role\": \"tool\", \"id\": \"call_8aFRPk3dtOnX4bz6LQThL7ap\", \"name\": \"analyze_with_math_agent\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": \"Travel advice: {\\\"city\\\":\\\"Tokyo\\\",\\\"reason\\\":\\\"The weather is sunny and the temperature is 22\\u00b0C, making it a great time to visit.\\\",\\\"best_time_to_visit\\\":\\\"spring or autumn\\\",\\\"must_see_attractions\\\":[\\\"Senso-ji Temple\\\",\\\"Shibuya Crossing\\\",\\\"Tokyo Disneyland\\\"]}\", \"role\": \"tool\", \"id\": \"call_OUv8DyfzPk3v82BdHPgvTIAf\", \"name\": \"get_travel_advice\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"1) The result of \\\\(15 \\\\times 7 + 3^2\\\\) is 114.\\n\\n2) Travel advice for Tokyo:\\n- City: Tokyo\\n- Reason: The weather is sunny, with a temperature of 22\\u00b0C, making it a great time to visit.\\n- Best time to visit: Spring or autumn\\n- Must-see attractions: Senso-ji Temple, Shibuya Crossing, Tokyo Disneyland\"}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 4655.161
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "tokensUsage": {
      "prompt": 299,
      "completion": 86
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "dfe7e158-447f-40ca-b375-361bf526bc9b",
    "parentRunId": "08115de3-2842-4af9-b4b1-8f3fc388e59c",
    "timestamp": "2025-06-24T18:20:00.646Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "research_agent",
      "logfire.msg": "research_agent run",
      "final_result": "1) The result of \\(15 \\times 7 + 3^2\\) is 114.\n\n2) Travel advice for Tokyo:\n- City: Tokyo\n- Reason: The weather is sunny, with a temperature of 22Â°C, making it a great time to visit.\n- Best time to visit: Spring or autumn\n- Must-see attractions: Senso-ji Temple, Shibuya Crossing, Tokyo Disneyland",
      "all_messages_events": "[{\"content\": \"You are a research coordinator. Delegate tasks to specialized agents.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I need two things: 1) Calculate 15 * 7 + 3^2, and 2) Get travel advice for Tokyo\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_8aFRPk3dtOnX4bz6LQThL7ap\", \"type\": \"function\", \"function\": {\"name\": \"analyze_with_math_agent\", \"arguments\": \"{\\\"question\\\": \\\"15 * 7 + 3^2\\\"}\"}}, {\"id\": \"call_OUv8DyfzPk3v82BdHPgvTIAf\", \"type\": \"function\", \"function\": {\"name\": \"get_travel_advice\", \"arguments\": \"{\\\"destination\\\": \\\"Tokyo\\\"}\"}}], \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": \"Math analysis result: The result of \\\\(15 \\\\times 7\\\\) is 105, \\\\(3^2\\\\) is 9, and the sum of 105 and 9 is 114.\", \"role\": \"tool\", \"id\": \"call_8aFRPk3dtOnX4bz6LQThL7ap\", \"name\": \"analyze_with_math_agent\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": \"Travel advice: {\\\"city\\\":\\\"Tokyo\\\",\\\"reason\\\":\\\"The weather is sunny and the temperature is 22\\u00b0C, making it a great time to visit.\\\",\\\"best_time_to_visit\\\":\\\"spring or autumn\\\",\\\"must_see_attractions\\\":[\\\"Senso-ji Temple\\\",\\\"Shibuya Crossing\\\",\\\"Tokyo Disneyland\\\"]}\", \"role\": \"tool\", \"id\": \"call_OUv8DyfzPk3v82BdHPgvTIAf\", \"name\": \"get_travel_advice\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"role\": \"assistant\", \"content\": \"1) The result of \\\\(15 \\\\times 7 + 3^2\\\\) is 114.\\n\\n2) Travel advice for Tokyo:\\n- City: Tokyo\\n- Reason: The weather is sunny, with a temperature of 22\\u00b0C, making it a great time to visit.\\n- Best time to visit: Spring or autumn\\n- Must-see attractions: Senso-ji Temple, Shibuya Crossing, Tokyo Disneyland\", \"gen_ai.message.index\": 3, \"event.name\": \"gen_ai.assistant.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "tokensUsage": {
      "prompt": 413,
      "completion": 143
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "dfe7e158-447f-40ca-b375-361bf526bc9b",
    "parentRunId": "08115de3-2842-4af9-b4b1-8f3fc388e59c",
    "timestamp": "2025-06-24T18:20:21.591Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "research_agent",
      "logfire.msg": "research_agent run",
      "final_result": "1) The result of \\(15 \\times 7 + 3^2\\) is 114.\n\n2) Travel advice for Tokyo:\n- City: Tokyo\n- Reason: The weather is sunny, with a temperature of 22Â°C, making it a great time to visit.\n- Best time to visit: Spring or autumn\n- Must-see attractions: Senso-ji Temple, Shibuya Crossing, Tokyo Disneyland",
      "all_messages_events": "[{\"content\": \"You are a research coordinator. Delegate tasks to specialized agents.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"I need two things: 1) Calculate 15 * 7 + 3^2, and 2) Get travel advice for Tokyo\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_8aFRPk3dtOnX4bz6LQThL7ap\", \"type\": \"function\", \"function\": {\"name\": \"analyze_with_math_agent\", \"arguments\": \"{\\\"question\\\": \\\"15 * 7 + 3^2\\\"}\"}}, {\"id\": \"call_OUv8DyfzPk3v82BdHPgvTIAf\", \"type\": \"function\", \"function\": {\"name\": \"get_travel_advice\", \"arguments\": \"{\\\"destination\\\": \\\"Tokyo\\\"}\"}}], \"gen_ai.message.index\": 1, \"event.name\": \"gen_ai.assistant.message\"}, {\"content\": \"Math analysis result: The result of \\\\(15 \\\\times 7\\\\) is 105, \\\\(3^2\\\\) is 9, and the sum of 105 and 9 is 114.\", \"role\": \"tool\", \"id\": \"call_8aFRPk3dtOnX4bz6LQThL7ap\", \"name\": \"analyze_with_math_agent\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"content\": \"Travel advice: {\\\"city\\\":\\\"Tokyo\\\",\\\"reason\\\":\\\"The weather is sunny and the temperature is 22\\u00b0C, making it a great time to visit.\\\",\\\"best_time_to_visit\\\":\\\"spring or autumn\\\",\\\"must_see_attractions\\\":[\\\"Senso-ji Temple\\\",\\\"Shibuya Crossing\\\",\\\"Tokyo Disneyland\\\"]}\", \"role\": \"tool\", \"id\": \"call_OUv8DyfzPk3v82BdHPgvTIAf\", \"name\": \"get_travel_advice\", \"gen_ai.message.index\": 2, \"event.name\": \"gen_ai.tool.message\"}, {\"role\": \"assistant\", \"content\": \"1) The result of \\\\(15 \\\\times 7 + 3^2\\\\) is 114.\\n\\n2) Travel advice for Tokyo:\\n- City: Tokyo\\n- Reason: The weather is sunny, with a temperature of 22\\u00b0C, making it a great time to visit.\\n- Best time to visit: Spring or autumn\\n- Must-see attractions: Senso-ji Temple, Shibuya Crossing, Tokyo Disneyland\", \"gen_ai.message.index\": 3, \"event.name\": \"gen_ai.assistant.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 20945.939
    },
    "tokensUsage": {
      "prompt": 413,
      "completion": 143
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "1f5a27d6-fccc-4633-b77d-69d25a487b2d",
    "timestamp": "2025-06-24T18:20:00.645Z",
    "metadata": {
      "test.name": "nested_agents",
      "test.complexity": "high",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "1f5a27d6-fccc-4633-b77d-69d25a487b2d",
    "timestamp": "2025-06-24T18:20:21.592Z",
    "metadata": {
      "test.name": "nested_agents",
      "test.complexity": "high",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 20946.794
    }
  }
]
Using project key: 07ff18c9-f052-4260-9e89-ea93fe9ba8c5

ðŸ”­ Received traces: 1 ResourceSpans
Resource attributes: {
  "telemetry.sdk.language": "python",
  "telemetry.sdk.name": "opentelemetry",
  "telemetry.sdk.version": "1.34.1",
  "service.name": "pydantic-ai-test",
  "lunary.project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
}
Processing span chat gpt-3.5-turbo -> 2 events
Processing span agent run -> 2 events
Processing span test-5-streaming -> 2 events

ðŸ“¥ Forwarding 6 events to backend
Events: [
  {
    "type": "llm",
    "event": "start",
    "runId": "a22787c9-de66-468d-ae7c-7ad6abd450ee",
    "parentRunId": "0f821c46-de6c-435b-9b83-b2746c4a3804",
    "timestamp": "2025-06-24T18:20:21.593Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo",
      "events": "[{\"content\": \"You are a creative storyteller. Generate stories word by word.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Tell me a very short story about a robot\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"\"}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo"
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "a22787c9-de66-468d-ae7c-7ad6abd450ee",
    "parentRunId": "0f821c46-de6c-435b-9b83-b2746c4a3804",
    "timestamp": "2025-06-24T18:20:22.068Z",
    "metadata": {
      "system": "openai",
      "server.address": "api.openai.com",
      "model_request_parameters": "{\"function_tools\": [], \"output_mode\": \"text\", \"output_object\": null, \"output_tools\": [], \"allow_text_output\": true}",
      "modelResponse": "gpt-3.5-turbo",
      "events": "[{\"content\": \"You are a creative storyteller. Generate stories word by word.\", \"role\": \"system\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Tell me a very short story about a robot\", \"role\": \"user\", \"gen_ai.system\": \"openai\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}, {\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"\"}, \"gen_ai.system\": \"openai\", \"event.name\": \"gen_ai.choice\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"events\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 475.044
    },
    "params": {
      "model": "gpt-3.5-turbo"
    },
    "name": "gpt-3.5-turbo",
    "level": "error",
    "error": {
      "code": 2,
      "message": "TypeError: 'async for' requires an object with __aiter__ method, got StreamedRunResult"
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "5f38322f-b706-4355-826b-765279f7cde7",
    "parentRunId": "7aba53b6-7ad7-44a5-a537-1a1b4d20a572",
    "timestamp": "2025-06-24T18:20:21.593Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "story_agent",
      "logfire.msg": "story_agent run",
      "all_messages_events": "[{\"content\": \"You are a creative storyteller. Generate stories word by word.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Tell me a very short story about a robot\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "5f38322f-b706-4355-826b-765279f7cde7",
    "parentRunId": "7aba53b6-7ad7-44a5-a537-1a1b4d20a572",
    "timestamp": "2025-06-24T18:20:22.070Z",
    "metadata": {
      "model_name": "gpt-3.5-turbo",
      "agent_name": "story_agent",
      "logfire.msg": "story_agent run",
      "all_messages_events": "[{\"content\": \"You are a creative storyteller. Generate stories word by word.\", \"role\": \"system\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.system.message\"}, {\"content\": \"Tell me a very short story about a robot\", \"role\": \"user\", \"gen_ai.message.index\": 0, \"event.name\": \"gen_ai.user.message\"}]",
      "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"all_messages_events\": {\"type\": \"array\"}, \"final_result\": {\"type\": \"object\"}}}",
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 477.598
    },
    "level": "error",
    "error": {
      "code": 2,
      "message": "TypeError: 'async for' requires an object with __aiter__ method, got StreamedRunResult"
    }
  },
  {
    "type": "llm",
    "event": "start",
    "runId": "d787730b-ee82-4e57-82e5-d8f617713f47",
    "timestamp": "2025-06-24T18:20:21.592Z",
    "metadata": {
      "test.name": "streaming",
      "streaming.enabled": true,
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5"
    }
  },
  {
    "type": "llm",
    "event": "end",
    "runId": "d787730b-ee82-4e57-82e5-d8f617713f47",
    "timestamp": "2025-06-24T18:20:22.071Z",
    "metadata": {
      "test.name": "streaming",
      "streaming.enabled": true,
      "telemetry.sdk.language": "python",
      "telemetry.sdk.name": "opentelemetry",
      "telemetry.sdk.version": "1.34.1",
      "service.name": "pydantic-ai-test",
      "project_key": "07ff18c9-f052-4260-9e89-ea93fe9ba8c5",
      "duration_ms": 479.129
    },
    "level": "error",
    "error": {
      "code": 2,
      "message": "TypeError: 'async for' requires an object with __aiter__ method, got StreamedRunResult"
    }
  }
]
Using project key: 07ff18c9-f052-4260-9e89-ea93fe9ba8c5
âœ… Successfully forwarded to backend
âœ… Successfully forwarded to backend
âœ… Successfully forwarded to backend
